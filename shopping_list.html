<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shopping Cart</title>
  <link rel="stylesheet" href="Styles/main.css">
  <link rel="stylesheet" href="Styles/cart.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  </head>

  <body>

      <nav class="main-header-nav">
        <img src="../Images/logo.png" alt="UnivBid Logo" class="logo">
        <div class="link-navbar">
            <a href="#" aria-label="Home UnivBid">Home</a>
            <a href="career.html" aria-label="Career Opportunities">Career</a>
            <a href="#" aria-label="Blg">Blog</a>
            <a href="#about" aria-label="About UnivBid">About</a>
            <a href="contact.html" aria-label="Contact Us">Contact</a>
        </div>
    </nav>
  
    <h1>Your Cart</h1>
    <div id="card_container" class="cart-container"></div>
    
    <div id="global-notification" class="notification hidden">
        <div class="notification-content">
            <span id="notification-message"></span>
            <button class="notification-close">&times;</button>
        </div>
    </div>
    
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const card_container = document.getElementById("card_container");
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        console.log(cart);
  
        function renderCart() {
          card_container.innerHTML = "";
  
          if (cart.length === 0) {
            card_container.innerHTML = '<p class="empty-cart">Your cart is empty.</p>';
            return;
          }
  
          cart.forEach((product, index) => {
            const item_div = document.createElement("div");
            item_div.classList.add("cart-item");
  
            const info = document.createElement("div");
            info.classList.add("cart-info");
  
            const name = document.createElement("h3");
            name.innerText = product.name;
  
            const price = document.createElement("p");
            price.innerText = `Price: â‚¬${product.price}`;
  
            const quantity = document.createElement("p");
            quantity.innerText = `Quantity: ${product.quantity}`;
  
            const condition = document.createElement("p");
            condition.innerText = `Condition: ${product.condition}`;
  
            info.append(name, price, quantity, condition);

            const button_div =  document.createElement("div");
            button_div.classList.add("button_div");
  
            const remove_btn = document.createElement("button");
            remove_btn.innerText = "Remove";
            remove_btn.classList.add("remove-btn");
            remove_btn.addEventListener("click", () => {
              cart.splice(index, 1);
              localStorage.setItem("cart", JSON.stringify(cart));
              renderCart();
            });

            const view_btn = document.createElement("button");
            view_btn.innerText = "View Product";
            view_btn.classList.add("view-btn");
            view_btn.addEventListener("click", ()=>{
              sessionStorage.setItem("selected_item", JSON.stringify(product));
              window.location.href = "product_listing_page.html";
            });

            button_div.append(remove_btn,view_btn);
  
            item_div.append(info, button_div);
            card_container.appendChild(item_div);
          });
        }
  
        renderCart();
      });
    </script>

  
  </body>
  </html>